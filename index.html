<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        // Firebase SDK initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { getFirestore, doc, setDoc, onSnapshot, updateDoc, arrayUnion, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDPCMCi4BB2dySCc8G4adLYQXJSk-903v0",
            authDomain: "weddingchart.firebaseapp.com",
            projectId: "weddingchart",
            storageBucket: "weddingchart.firebasestorage.app",
            messagingSenderId: "345074315998",
            appId: "1:345074315998:web:ae600053bcbe04a977884f"
        };
        const app = initializeApp(firebaseConfig);
        // Expose Firebase services to the global window object for script.js
        window.firebaseServices = { db: getFirestore(app), doc, setDoc, onSnapshot, updateDoc, arrayUnion, collection, query, where, getDocs };
    </script>
</head>
<body>
    <div id="app-container">
        <header class="header">
            <div id="simple-calendar-container">
                <div id="calendar-picker" class="simple-calendar-picker">
                    <select id="month-select"></select>
                    <select id="year-select"></select>
                    <button id="picker-go-btn">OK</button>
                </div>
            </div>

            <div class="language-selector">
                <img src="https://flagcdn.com/fr.svg" alt="Fran√ßais" id="lang-fr" class="flag active">
                <img src="https://flagcdn.com/us.svg" alt="English" id="lang-en" class="flag">
            </div>

            <h1 data-translate-key="mainTitle">Suivi Sportif üèãÔ∏è‚Äç‚ôÇÔ∏è</h1>
            <p data-translate-key="subTitle">S√©lectionnez une date pour voir ou ajouter un entra√Ænement.</p>
            <div class="date-navigation">
                <button id="prev-day-btn" class="day-nav-btn" aria-label="Previous day">‚Äπ</button>
                <input type="date" id="date-picker" aria-label="Date selector">
                <button id="next-day-btn" class="day-nav-btn" aria-label="Next day">‚Ä∫</button>
            </div>
        </header>

        <main class="main-container">
            <div class="form-container">
                <h2 data-translate-key="addExerciseTitle" id="form-title">Ajouter un exercice</h2>
                <form id="add-workout-form">
                    <div class="form-group"><label for="category-select" data-translate-key="categoryLabel">Cat√©gorie</label><select id="category-select" required></select></div>
                    <div class="form-group"><label for="exercise-select" data-translate-key="exerciseLabel">Exercice</label><select id="exercise-select" required></select></div>
                    <div id="quick-add-container">
                        <div class="quick-add-group"><label for="quick-sets" data-translate-key="setsLabel">S√©ries</label><input type="number" id="quick-sets" min="1" value="3"></div>
                        <div class="quick-add-group"><label for="quick-reps" data-translate-key="repsLabel">R√©p√©titions</label><input type="number" id="quick-reps" min="1"></div>
                        <div class="quick-add-group"><label for="quick-weight" data-translate-key="weightLabel">Poids</label><input type="number" id="quick-weight" min="0" step="0.5"></div>
                        <div class="quick-add-group"><label for="quick-unit" data-translate-key="unitLabel">Unit√©</label><select id="quick-unit"><option value="lbs" selected>lbs</option><option value="kg">kg</option></select></div>
                        <div class="quick-add-group bodyweight-group"><input type="checkbox" id="bodyweight-checkbox"><label for="bodyweight-checkbox" data-translate-key="bodyweightLabel">Poids du corps</label></div>
                        <button type="button" id="generate-sets-button" data-translate-key="generateSetsBtn">G√©n√©rer les s√©ries</button>
                    </div>
                    <div id="sets-container"></div>
                    <button type="button" id="add-set-button" data-translate-key="addSetManuallyBtn">Ajouter une s√©rie manuellement</button>
                    <div class="form-group"><label for="notes-input" data-translate-key="notesLabel">Notes</label><textarea id="notes-input" data-translate-key="notesPlaceholder" placeholder="Sensations, performances..."></textarea></div>
                    <div class="form-actions"><button type="submit" class="submit-btn" id="submit-workout-btn" data-translate-key="saveExerciseBtn">Enregistrer</button><button type="button" class="cancel-btn" id="cancel-edit-btn" data-translate-key="cancelEditBtn">Annuler</button></div>
                </form>
            </div>
            <div id="workout-log-container">
                <div class="workout-log-header"><h2 data-translate-key="workoutOf">Entra√Ænement du <span id="log-date"></span></h2><div class="display-unit-selector"><button id="display-kg" class="unit-toggle">kg</button><button id="display-lbs" class="unit-toggle active">lbs</button></div></div>
                <div id="workout-log"></div>
            </div>
        </main>
    </div>
    <template id="set-row-template">
        <div class="set-row">
            <input type="number" class="reps-input" placeholder="Reps" min="0" required><span>x</span><input type="number" class="weight-input" placeholder="Poids" min="0" step="0.5" required><select class="unit-select"><option value="lbs" selected>lbs</option><option value="kg">kg</option></select><button type="button" class="delete-set-btn" aria-label="Delete set">-</button>
        </div>
    </template>
    <script src="script.js" type="module"></script>
</body>
</html>
